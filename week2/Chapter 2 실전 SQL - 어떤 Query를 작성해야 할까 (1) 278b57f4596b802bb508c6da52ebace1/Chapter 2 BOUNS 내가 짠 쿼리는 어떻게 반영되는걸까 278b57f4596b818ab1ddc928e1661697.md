# Chapter 2 BOUNS. 내가 짠 쿼리는 어떻게 반영되는걸까?

# 쿼리 실행 흐름

---

열심히 쿼리 짜는 법을 배워봤는데, 그래서 이 쿼리는 대체 내가 나중에 짤 코드에 어떻게 반영되는 걸까요? 나중에 나올 내용을 미리 한번 봐 볼 겸, 쿼리 실행 흐름을 간단하게 알아봅시다.

**1. 클라이언트 요청**

 일단 사용자가 웹/앱 화면에서 버튼 클릭이나 스크롤 등으로 요청을 보냅니다. 

예를 들면 이런 식으로요.

```sql
GET /books?tag=UMC&page=2
```

지금은 클라이언트가 검색 키워드는 UMC, 2페이지를 요청했구나 정도만 알아주시면 될 것 같습니다. (이 부분에 대해선 다음 주 워크북에서 다뤄요!) 

**2. 서버(백엔드)에서 요청 처리** 

그럼 서버는 URL과 쿼리 파라미터를 읽어서 필요한 데이터 조건을 정리합니다. 지금 예시에서는 페이지당 10개라고 가정하겠습니다. 

그래서 이렇게 만든 조건을 **SQL 쿼리의 변수**로 매핑시킵니다. 

```jsx
const tag = req.query.tag;    // 'UMC'
const page = req.query.page;  // 2
const limit = 10;
const offset = (page - 1) * limit;
```

**3. DB 쿼리 실행 & DB 결과 수신** 

그 다음 서버에서는 DB 커넥션을 통해 SQL을 실행합니다. 그러면 DB는 조건에 맞는 데이터를 찾아서 결과를 반환시켜줍니다. 

**4. 서버에서 JSON 응답으로 변환**

서버는 결과를 가공한 후 JSON으로 변환해 프론트엔드에게 전달합니다. 가공은 필요 없는 컬럼을 제거하고, 추가 계산을 하는 등의 과정으로 이루어집니다.  

**5. 클라이언트에서 데이터 표시** 

프론트엔드는 JSON 데이터를 받아서 화면에 렌더링을 하고, 페이지네이션이면 “다음 페이지” 요청을 다시 서버에 보냅니다. 

흐름이 간략하게나마 이해가 가시나요? 이번 주도 수고 많으셨습니다 🙂