# Chapter 1. Database 설계

<aside>
🚨 **주의사항!**

이번 1주차에서는 기본적인 **DDL, DML은 알고 계신다는 전제**로 시작하며, 서버 파트의 모집 자체를 **DB에 대한 사전 지식이 있는 분**을 모집했기에, 정말 기본적인 DB 용어 (외래키, 관계형 데이터베이스, 기본 키 등등)는 참고 링크만 드릴 예정이니 준비되지 않으신 챌린저들은 꼭 공부를 하시고 1주차를 진행해주시기 바랍니다.

[🚧**워크북 이용 동의서**🚧**]
반드시 작성 후 워크북 스터디를 시작해주세요!**
https://forms.gle/EUaXpsc3Ziz7mjQn8

</aside>

## 📝 학습 목표

---

1. SQL, NoSQL에 대해 알아본다.
2. Database 설계를 어떻게 하는 것이 좋은지 이해한다.
3. 로컬 DB를 설치하여 연결 해본다.

## 📸 잠깐 ! 스터디 인증샷은 찍으셨나요?📸

---

* 스터디리더께서 대표로 매 주차마다 한 장 남겨주시면 좋겠습니다!🙆💗
 (사진을 저장해서 이미지 임베드를 하셔도 좋고, 복사+붙여넣기 해서 넣어주셔도 좋습니다!)

[](https://www.notion.so)

## 📑 1주차 주제

---

이번 주차는 이제 **백엔드 서버의 핵심**인
**데이터베이스를 어떻게 설계하는 것이 좋을까?** 이를 고민하고,

요구 사항 몇 가지와 함께
**이런 상황에서 어떻게 설계를 하는 것이 좋을 지**를 다루는 것이 **주 내용**입니다.

이번 주차의 주제인 데이터베이스를 **직접 설계해보는 것**이 매우 중요하니,
미션을 통해 설계를 해보며 **스스로 익히는 것이 중요한 주차**입니다!

> **이번 주차 요약**
> 
> - **데이터베이스를 어떻게 설계**하는 것이 좋을까?
> - **이런 상황에서는 어떻게 설계**하는 것이 좋을까?
> - **직접 데이터베이스를 설계해보자!**

- **참고 자료 (기초 지식 등)**
    
    [MySQL- 구조와 테이블 생성](https://jominseoo.tistory.com/48)
    
    [[MYSQL] 📚 기본 SQL문법 정리 (테이블 조회, 생성, 수정, 삭제)](https://inpa.tistory.com/entry/MYSQL-%F0%9F%93%9A-%EA%B8%B0%EB%B3%B8-SQL%EB%AC%B8-%EC%A0%95%EB%A6%AC-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%A1%B0%ED%9A%8C-%EC%83%9D%EC%84%B1-%EC%88%98%EC%A0%95-%EC%82%AD%EC%A0%9C)
    
    [[MYSQL] 📚 테이블 조인(JOIN) - 그림으로 알기 쉽게 정리](https://inpa.tistory.com/m/entry/MYSQL-%F0%9F%93%9A-JOIN-%EC%A1%B0%EC%9D%B8-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EC%95%8C%EA%B8%B0%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC)
    
    [[MYSQL] 📚 서브쿼리 개념 & 문법 💯 정리](https://inpa.tistory.com/m/entry/MYSQL-%F0%9F%93%9A-%EC%84%9C%EB%B8%8C%EC%BF%BC%EB%A6%AC-%EC%A0%95%EB%A6%AC)
    
    [ERD, 어떻게 설계하는 걸까?](https://mslilsunshine.tistory.com/164)
    
    [📋 데이터 모델링 개념 & ERD 다이어그램 작성 💯 총정리](https://inpa.tistory.com/entry/DB-📚-데이터-모델링-1N-관계-📈-ERD-다이어그램)
    
    [ERD 세부 개념과 작성 방법](https://velog.io/@doohyunlm/DB-ERD-작성-방법)
    

## 📑 1주차 본문 들어가기 전

---

본격적인 데이터베이스 설계에 들어가기 전, 먼저 생각해 보아야 할 것은 SQL과 NOSQL입니다.

SQL은 Stands for Structured Query의 약자로 주로 관계형 데이터 베이스에 이용이 되고

NoSQL은 Not Only SQL의 약자로 SQL이 아닌 나머지를 의미합니다. 

밑에 더 자세히 설명하여 볼게요!

## SQL

SQL은 Structured Query Language의 약자로 관계형 데이터베이스를 사용하는 시스템에서 데이터를 관리하는 데 사용되는 언어입니다. 

입출력 속도 보다는 정확도와 입출력이 중요할 때 적합하며 데이터가 일관되고 테이블 간의 관계가 잘 정의된 구조화된 데이터에 좋습니다. 

주요 SQL 쪽의 데이터베이스 시스템으로는 MySQL, PostgreSQL, Oracle Database 등이 존재합니다.

- **MySQL, PostgreSQL, Oracle Database의 차이는 뭘까? 같은 SQL인데 그게 그거 아닌가?**
    
    혹시 이 셋의 차이에 대해서는 생각해본 적 있으신가요? 한번 간단하게 비교해 보겠습니다.
    
    ### MySQL
    
    - 장점: 오픈 소스이고 무료로 사용이 가능합니다. 빠른 읽기 및 쓰기 성능을 제공하며, 특히 웹 애플리케이션에 많이 사용됩니다. 업데이트 성능도 뛰어나고, **단순한 데이터 트랜잭션**에 적합합니다. 또한 커뮤니티와 지원이 활발해 문제가 생겼을 때 빠르게 해결할 수 있는 참고자료들이 많다는 장점이 있습니다.
    - 단점: 복잡한 쿼리와 **복잡한 트랜잭션 처리에 취약**하다는 단점이 있습니다. Nested Loop Join(바깥 테이블의 처리 범위를 하나씩 접근하면서 추출된 값으로 안쪽 테이블을 조인하는 방식)만을 지원하는데 이는 데이터가 커졌을 때 성능 문제를 야기할 수 있습니다.
    
    ### **PostgreSQL**
    
    - 장점: PostgreSQL도 오픈 소스이고, 다양한 조인 방식을 지원하여 복잡한 데이터베이스 쿼리에서 강력한 성능을 보여줍니다. **ACID** 준수 및 데이터 무결성 검증이 뛰어나고, 복잡한 트랜잭션과 **대규모 데이터베이스**에서 유리합니다. 또한 **JSON 지원** 등 최신 기술도 잘 지원합니다.
    - 단점: Update 성능이 떨어진다는 단점이 있습니다. 데이터를 수정할 때 기존 데이터를 삭제하고 새로운 데이터를 삽입하는 방식으로 작동하기 때문에, 대용량 데이터 처리 시 성능 저하가 발생할 수 있습니다.
    
    ### **Oracle Database**
    
    - 장점: **고성능**, **확장성** 및 **보안**이 뛰어나며, 트랜잭션 처리가 매우 효율적입니다. 또한 **대규모 엔터프라이즈 시스템**에서 많이 사용되며, 복잡한 쿼리 및 트랜잭션 처리에 매우 강합니다. **분산 처리**와 **고급 기능**이 많고, Partitioning, Clustering 과 같은 고급 기능도 지원하여 매우 유연하고 강력한 시스템을 구축할 수 있습니다.
    - 단점: 가장 큰 단점은 **비용**입니다. 상용 라이센스가 필요하고 가격이 비쌉니다. 또한 설치와 관리가 복잡하고, 특정 기능에 대한 이해와 사용까지 오랜 시간이 걸릴 수도 있습니다. 단순한 데이터베이스 관리와는 달리, 고급 기능을 잘 활용하기 위해서는 전문 지식이 필요합니다.
    
    간단하게나마 비교해 본다면 이 정도가 될 것 같습니다. 
    
    장단점을 잘 비교해 보고, 본인의 상황에 맞는 도구를 고르시면 됩니다.  
    

![SQL이 쓰이는 관계형 데이터베이스 구조](image.png)

SQL이 쓰이는 관계형 데이터베이스 구조

## NoSQL

NoSQL은 Not Only SQL의 약자로 SQL을 사용하지 않는 DBMS들을 의미합니다. 

NoSQL 쪽의  데이터베이스는 key-value, document, graph 등 다양한 데이터 구조를 지원하기에 데이터가 미리 정의된 스키마를 따르지 않고 데이터 요소 간의 관계가 잘 정의되어 있지 않은 반정형 또는 비정형 데이터에 적합합니다. 

주요 NoSQL 쪽의 데이터베이스 시스템으로는 MongoDB, Redis, neo4j, DynamoDB 등이 존재합니다.

![key-value 구조](key-value.png)

key-value 구조

![NoSQL 중 가장 많이 쓰이는 Document 구조 (MongoDB)](%25EC%25BA%25A1%25EC%25B2%2598.png)

NoSQL 중 가장 많이 쓰이는 Document 구조 (MongoDB)

SQL과 NoSQL 중 어느 것을 사용해야 할까요?

정답은 없습니다.

SQL과 NoSQL은 서로 다른 장단점을 가지며, 프로젝트의 요구 사항에 맞춰 적절한 데이터베이스 유형을 선택하는 것이 중요합니다. 

저희는 가장 보편적으로 사용 되는 SQL을 기준으로 진행해보겠습니다!

## 🔖 1주차 본문

---

### 🛠️ 데이터베이스 설계하기

<aside>
💡

데이터베이스는 언제, 어떻게 설계하는지 한번 알아봅시다. 

</aside>

[ Chapter 1. Database 설계- 데이터베이스 기초](Chapter%201%20Database%20%EC%84%A4%EA%B3%84-%20%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%20%EA%B8%B0%EC%B4%88%20271b57f4596b81e695dcfaf0be613478.md)

### 💾 로컬 DB 세팅하기

<aside>
💡

로컬 DB를 한번 직접 세팅해봅시다. 

</aside>

[Chapter 1. Database 설계- 로컬 DB 세팅하기](Chapter%201%20Database%20%EC%84%A4%EA%B3%84-%20%EB%A1%9C%EC%BB%AC%20DB%20%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0%20271b57f4596b81a7a892ea59d93c4ad2.md)

# 🎯 핵심 키워드

---

<aside>
💡 주요 내용들에 대해 조사해보고, 자신만의 생각을 통해 정리해보세요!
레퍼런스를 참고하여 정의, 속성, 장단점 등을 적어주셔도 됩니다.
조사는 공식 홈페이지 **Best**, 블로그(최신 날짜) **Not Bad**

</aside>

- 외래키
    
    외래키(FOREIGN KEY; FK)는 하나의 테이블이 다른 테이블을 참조하고자 할 때 정의한다. 만약 사원 테이블과 부서 테이블이 있다고 가정했을 때, 사원은 반드시 특정 부서에 속해야 한다. 이때, 부서ID를 사원테이블에서 참조할 수 있다. 
    
    외래키는 참조 무결성 제약 옵션을 별도로 지정할 수 있다
    
    | CASCADE | 부모 값 삭제 시 자식 값 같이 삭제 |
    | --- | --- |
    | SET NULL | 부모 값 삭제 시 자식의 값 NULL처리 |
    | SET DEFAULT | 부모 값 삭제 시 자식의 값 DEAFULT값으로 변경 |
    | RESTRICT | 자식 테이블에 해당 데이터가 PK로 존재하지 않는 경우에만 부모 값 삭제 및 수정 가능 |
    | NO ACTION | 참조 무결성 제약이 걸려있는 경우 삭제 및 수정 불가 |
    
    ※유선배 SQL 개발자 책 참고
    
- 기본키
    
    주식별자, PK(Primary Key)라고도 하며, 다음 네 가지 특징을 갖는다.
    
    - 유일성: unique한 값을 갖는다
    - 최소성: 유일성을 보장하는 최소 개수의 속성이어야 한다.
    - 불변성: 속상값이 되도록 변하지 않아야 한다.
    - 존재성: NOT NULL
- ER 다이어그램
    
    ERD (Entity Relationship Diagram)는 단어에서 의미하는 그대로 'Entity 개체'와 'Relationship 관계'를 중점적으로 표시하는 데이터베이스 구조를 한 눈에 알아보기 위해 그려놓는 다이어그램이다. 개체 관계도라고도 불리며 요구분석사항에서 얻은 엔티티와 속성들의 관계를 그림으로 표현한 것이다.
    
- 복합 키
    
    두 개 이상의 속성으로 구성된 식별자
    
    주로, 부모 테이블의 키를 자식 테이블에서 복합 키로 정의하는 데 많이 사용된다.
    
    예를 들어, ~~무신사~~에서 옷을 한번에 10개를 주문했다고 가정.
    
    일반적으로 한 주문에 대한 주문번호가 생성되는데, 각각의 옷에 대한 정보를 저장하고자 할 때는, 주문번호 + 상품번호를 묶어서 복합 키로 지정할 수 있다.
    
- 연관관계
    
    
    | 1:1 | 한 쪽에 하나만 연결 | 유저 ↔ 프로필 |
    | --- | --- | --- |
    | 1:N | 한 쪽에 여러 개 연결 가능 | 사원 ↔ 부서 |
    | N:1 | 여러 개가 한 개를 참조 | 제품 ↔ 브랜드 |
    | N:M | 양방향 여러 개와 연결 가능 | 학생 ↔ 강의 |
- 정규화
    
    [정보처리 실기_데이터베이스06강_정규화](https://youtu.be/RXQ1kZ_JHqg?si=f0OPsoOWnJXSbqca)
    
    [https://cochae.tistory.com/entry/SQLD-데이터-모델링의-이해-下](https://cochae.tistory.com/entry/SQLD-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81%EC%9D%98-%EC%9D%B4%ED%95%B4-%E4%B8%8B)
    
    →개인 블로그에 정리한 내용
    
    > 정규화
    > 
    
    제 1정규형-모든 속성은 반드시 하나의 값만 가져한다
    
    → 한 사람이 여러 개의 직업을 가질 경우, ex) 회계사, 바리스타, 변호사 . . . (말이 안되지만)
    
    이 직업들을 전부 ‘직업’이라는 컬럼에 쉼표로 구분하여 입력 시에 직업을 조회하거나 분류 정렬할 때 매우 복잡 → 직업 테이블을 분리하는 것이 좋다
    
    제 2정규형-엔터티의 모든 일반속성은 반드시 모든 주식별자에 종속되어야 한다.
    
    → 주문번호 & 음료코드로 이루어진 복합키가 주식별자라고 할 떄, 음료명이라는 일반 컬럼은 제 2 정규형에 위반된다. 음료코드만으로 음료명을 알 수 있기 때문이다.
    
    제 3정규형-주식별자가 아닌 모든 속성 간에는 서로 종속될 수 없다
    
- 반 정규화
    
    [https://cochae.tistory.com/entry/SQLD-데이터-모델링의-이해-下](https://cochae.tistory.com/entry/SQLD-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81%EC%9D%98-%EC%9D%B4%ED%95%B4-%E4%B8%8B)
    
    →개인 블로그에 정리한 내용
    
    > 반정규화
    > 
    
    ※반정규화시 조회 성능은 향상될 수 있으나, 그 외에 입력, 수정, 삭제 성능은 저하될 가능성이 높다는 점에 주의할 것
    
    테이블 반정규화
    
    - 테이블 분할
    - 테이블 추가
    - 테이블 병합
    
    컬럼 반정규화
    
    - 중복 컬럼 추가
    - 파생 컬럼 추가
    - 이력 테이블 컬럼 추가
    
    관계 반정규화 
    
    JOIN이 많아 성능 저하가 발생될 경우, 필요한 경우 중복 관계를 추가할 수 있다
    

## 📢 학습 후기

---

- 이번 주차 워크북을 해결해보면서 어땠는지 회고해봅시다.
- 핵심 키워드에 대해 완벽하게 이해했는지? 혹시 이해가 안 되는 부분은 뭐였는지?

<aside>
💡 **1) 서비스 확장을 고려한 PK id값의 타입을 bigint로 지정하는 것
2) 레코드의 생성 및 수정 이력을 기록하고 정렬에 사용하기 위해 created_at, updated_at 컬럼을 추가하는 것, 
3) 알람 기능을 설계하는 3가지 방법(슈퍼/서브 타입, dtype, 완전 분리),
4) soft delete를 사용하는 것 (데이터 복구 가능, 통계 유지 등의 이유로) 등에 대해 알게 되었다.

이번 워크북을 통해 실제로 협업할 때, 개발을 시작하기 전에 ERD를 어떻게 설계하고 그 안에 각각의 타입이나 테이블은 어떤 식으로 구성하면 좋은 지 실무적인 관점에서 생각해볼 수 있었다.**

</aside>

## ⚠️ 스터디 진행 방법

---

1. 스터디를 진행하기 전, 워크북 내용들을 모두 채우고 스터디에서는 서로 모르는 내용들을 공유해주세요.
2. 미션은 워크북 내용들을 모두 완료하고 나서 스터디 전/후로 진행해보세요.
3. 다음주 스터디를 진행하기 전, 지난주 미션을 서로 공유해서 상호 피드백을 진행하시면 됩니다.

## ✅ 실습 체크리스트

---

- [x]  데이터베이스 설계하기
- [x]  로컬 DB 세팅하기

## ☑️ 실습 인증

---

![workbook01.png](workbook01.png)

![image.png](image%201.png)

## 🔥 미션

---

- **미션 자료**
    
    <aside>
    🚨 ❗**해당 자료는 챌린저분들의 미션을 위해 Plan 파트에서 제공해준 자료로,
    미션 외의 용도로 사용하는 것 및 유출을 절대 금합니다.**❗
    
    **❗아래 IA&WF 사진 및 for_UMC.fig 파일 및 파일 속 내용의 저작권은 모두 5th UMC Plan 파트장 아크(박승민)에게 있음을 밝힙니다.❗**
    
    </aside>
    
    - IA&WF 사진 파일
        
        아래 사진 외에도 첨부드린 사진에 해당하는 피그마 파일이 존재하니
        사진을 통해 보기 어려우시다면 피그마 파일을 이용해주세요!
        
        ![IA](for_UMC.png)
        
        IA
        
        ![WF](for_UMC%201.png)
        
        WF
        
    
    [for_UMC.fig](for_UMC.fig)
    
1. 주어진 IA(기획 플로우)와 와이어 프레임(디자인 프로토타입)을 보고 직접 데이터베이스를 설계해오기, 위에서 언급한 경우를 다 적용해서 할 것
2. 이름 글자 수 등 세부적인 부분은 원하는 대로 해도 됨!
3. 각 지역 별로 가게들이 있으며 가게를 방문하는 미션을 해결하며 포인트를 모으는 서비스
    1. 모든 지역마다 10개의 미션 클리어시 1000 point 부여로 고정

**최소한 로그인/회원가입, 미션, 홈 화면에 필요한 데이터는 설계를 해야함, 되어있지 않다면 원 아웃**

***미션 난이도 완화를 위해 지도 검색 기능 전부 pass, 저 부분은 설계 하지 마세요***

***내 포인트 관리, 알림 부분도 설계하지 마세요***

***사장님이 자신의 점포 관리하는 부분도 설계 대상에서 제외입니다.***

물론 원하시면 하셔도 됩니다. 😉

**< 시니어 미션 >**

[시니어 미션](%EC%8B%9C%EB%8B%88%EC%96%B4%20%EB%AF%B8%EC%85%98%20271b57f4596b81a19287cd532e2f968e.md)

## 💪 미션 기록

---

<aside>
🍀 미션 기록의 경우, 아래 미션 기록 토글 속에 작성하시거나, 페이지를 새로 생성하여 해당 페이지에 기록하여도 좋습니다!

하지만, 결과물만 올리는 것이 아닌, **중간 과정 모두 기록하셔야 한다는 점!** 잊지 말아주세요.

</aside>

- **미션 기록**
    
    [유채원 / 워크북 week01 - ERD설계](%EC%9C%A0%EC%B1%84%EC%9B%90%20%EC%9B%8C%ED%81%AC%EB%B6%81%20week01%20-%20ERD%EC%84%A4%EA%B3%84%20271b57f4596b81a19a8df8b3c9e8e900.md)
    

## ⚡ 트러블 슈팅

---

<aside>
💡 실습하면서 생긴 문제들에 대해서, **이슈 - 문제 - 해결** 순서로 작성해주세요.

</aside>

<aside>
💡 스스로 해결하기 어렵다면? 스터디원들에게 도움을 요청하거나 **너디너리의 지식IN 채널에 질문**해보세요!

</aside>

- ⚡이슈 작성 예시 (이슈가 생기면 아래를 복사해서 No.1, No.2, No3 … 으로 작성해서 트러블 슈팅을 꼭 해보세요!)
    
    **`이슈`**
    
    👉 앱 실행 중에 노래 다음 버튼을 누르니까 앱이 종료되었다.
    
    **`문제`**
    
    👉 노래클래스의 데이터리스트의 Size를 넘어서 NullPointException이 발생하여 앱이 종료된 것이었다. 
    
    **`해결`**
    
    👉  노래 다음 버튼을 눌렀을 때 데이터리스트의 Size를 검사해 Size보다 넘어가려고 하면 다음으로 넘어가는 메서드를 실행시키지 않고, 첫 노래로 돌아가게끔 해결
    
    **`참고레퍼런스`**
    
    - 링크
- ⚡이슈 No.1
    
    **`이슈`**
    
    👉 [트러블이 생긴 상태 작성]
    
    **`문제`**
    
    👉 [어떤 이유로 해당 이슈가 일어났는지 작성]
    
    **`해결`**
    
    👉  [해결 방법 작성]
    
    **`참고레퍼런스`**
    
    - [문제 해결 시 참고한 링크]

## 🤔 참고 자료

[1주차](1%EC%A3%BC%EC%B0%A8%20271b57f4596b8150a7cace52e3d72127.csv)

---

Copyright © 2023 최용욱(똘이) All rights reserved.

Copyright © 2024, 2025 김준환(제이미) All rights reserved.